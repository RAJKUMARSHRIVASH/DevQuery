<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign up page</title>
    <link rel="stylesheet" href="../css/register-login.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css">   
</head>
<body>
    <h1>Sign up form</h1>
    <button class="google"><i class="fa-brands fa-google"></i>Log in with Google</button>
    <button class="github"><i class="fa-brands fa-github"></i>Log in with GitHub</button>
    <button class="facebook"><i class="fa-brands fa-square-facebook"></i>Log in with Facebook</button>
    <div class="form-container">
        <form>
            <input required  type="text" id="name" placeholder="Enter your full name">
            <input required type="email" id="email" placeholder="Enter your email">
            <input required  type="password" id="password" placeholder="Enter your password">
            <input type="submit"  id="submit-btn">  
        </form>
        <a class="user-anchor" href="./login.html">Already an User</a>
    </div>
</body>
</html>
<script>
    let registerForm = document.querySelector("form")
registerForm.addEventListener("submit",async (e)=>{
e.preventDefault()
let userObj = {}
let allInputTags = document.querySelectorAll("input")
for(let i=0;i<allInputTags.length;i++){
    userObj[allInputTags[i].id] = allInputTags[i].value
}
try{
        let register_request = await fetch("http://localhost:8000/users/register",{
            method:"POST",
            headers:{
               "Content-Type": "application/json"
            },
            body:JSON.stringify(userObj)
        })
        const res = await register_request.json() 
        if(register_request.ok){
        alert(res.message)
        window.location.href ="./login.html"
        }else{
        
           alert(res.message)
        }
} catch (error) {
        console.log(error)
    }
    })
</script>